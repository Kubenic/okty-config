sudo: required
language: python
services:
    - docker

before_script:
    - docker run -v $PWD:/app -w /app node:11-alpine npm install

script:
    - docker run -v $PWD:/app -w /app node:11-alpine node ./deploy/tests/lint.js

before_deploy:
    - apt-get install python-pip
    - pip install awscli
    - export PATH=$PATH:$HOME/.local/bin

deploy:
    provider: script
    script: ./deploy/build.sh
    on:
        branch: master
